<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ğŸ•‹ Namaz Timings</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/earlyaccess/notonastaliqurdu.css" rel="stylesheet" />
  <style>
    body {
      font-family: 'Noto Nastaliq Urdu', sans-serif;
      background-color: #f9f9f9;
      margin: 0;
      color: #222;
    }
    header {
      background: #00796b;
      color: white;
      text-align: center;
      padding: 15px;
    }
    .back-link {
      margin: 15px;
      text-align: left;
    }
    .back-link a {
      background: #4a148c;
      color: white;
      padding: 8px 16px;
      border-radius: 6px;
      text-decoration: none;
    }
    .box {
      max-width: 700px;
      margin: 20px auto;
      background: white;
      border: 2px solid #4a148c;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 0 12px rgba(0,0,0,0.05);
    }
    h2 {
      color: #4a148c;
    }
    label {
      display: block;
      margin-top: 12px;
      font-weight: bold;
      color: #00695c;
    }
    .time-label {
      color: #4a148c;
    }
    .time-value {
      color: #388e3c;
      font-weight: bold;
    }
    .input-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }
    input[type="time"] {
      padding: 6px;
      font-size: 16px;
      flex: 1;
    }
    button {
      margin-top: 15px;
      padding: 10px 20px;
      background-color: #388e3c;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover {
      background-color: #2e7d32;
    }
    footer {
      background: #00796b;
      color: white;
      text-align: center;
      padding: 10px;
      margin-top: 30px;
    }
  </style>
</head>
<body>

<header>
  <h1>ğŸ•‹ Namaz Kay Awqat (Ù†Ù…Ø§Ø² Ú©Û’ Ø§ÙˆÙ‚Ø§Øª)</h1>
</header>

<div class="back-link">
  <a href="index.html">ğŸ”™ Wapas (ÙˆØ§Ù¾Ø³)</a>
</div>

<div class="box">
  <h2>ğŸ“ Auto Timings (Ø®ÙˆØ¯Ú©Ø§Ø± Ø§ÙˆÙ‚Ø§Øª)</h2>
  <div id="autoTimings">â³ Loading...</div>

  <hr>

  <h2>ğŸ“ Manual Timings (Ø¯Ø³ØªÛŒ ÙˆÙ‚Øª Ø¯Ø±Ø¬ Ú©Ø±ÛŒÚº)</h2>

  <div class="input-row">
    <label class="time-label">ğŸ•Œ Fajr (ÙØ¬Ø±):</label>
    <input type="time" id="manualFajr">
  </div>
  <div class="input-row">
    <label class="time-label">ğŸ•› Dhuhr (Ø¸ÛØ±):</label>
    <input type="time" id="manualDhuhr">
  </div>
  <div class="input-row">
    <label class="time-label">ğŸœ Asr (Ø¹ØµØ±):</label>
    <input type="time" id="manualAsr">
  </div>
  <div class="input-row">
    <label class="time-label">ğŸ•Œ Maghrib (Ù…ØºØ±Ø¨):</label>
    <input type="time" id="manualMaghrib">
  </div>
  <div class="input-row">
    <label class="time-label">ğŸŒƒ Isha (Ø¹Ø´Ø§Ø¡):</label>
    <input type="time" id="manualIsha">
  </div>

  <button onclick="showManual()">ğŸ“¥ Save Timings (Ù…Ø­ÙÙˆØ¸ Ú©Ø±ÛŒÚº)</button>

  <div id="manualResult" style="margin-top: 20px;"></div>
</div>

<footer>
  Â© 2025 Islamic App | Tamam Rights Mehfooz (ØªÙ…Ø§Ù… Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ ÛÛŒÚº)
</footer>

<script>
  async function getAutoTimings() {
    try {
      const loc = await new Promise((res, rej) => navigator.geolocation.getCurrentPosition(res, rej));
      const lat = loc.coords.latitude;
      const lon = loc.coords.longitude;
      const response = await fetch(`https://api.aladhan.com/v1/timings?latitude=${lat}&longitude=${lon}&method=2`);
      const data = await response.json();
      const t = data.data.timings;

      const html = `
        <div><span class="time-label">ğŸŒ… Imsak (Ø§Ù…Ø³Ø§Ú©):</span> <span class="time-value">${t.Imsak}</span></div>
        <div><span class="time-label">ğŸ•Œ Fajr (ÙØ¬Ø±):</span> <span class="time-value">${t.Fajr}</span></div>
        <div><span class="time-label">ğŸŒ¤ Sunrise (Ø·Ù„ÙˆØ¹):</span> <span class="time-value">${t.Sunrise}</span></div>
        <div><span class="time-label">â˜€ï¸ Chasht (Ú†Ø§Ø´Øª):</span> <span class="time-value">${formatTime(addMinutes(t.Sunrise, 90))}</span></div>
        <div><span class="time-label">ğŸŒ Zawal (Ø²ÙˆØ§Ù„):</span> <span class="time-value">${formatTime(addMinutes(t.Dhuhr, -5))}</span></div>
        <div><span class="time-label">ğŸ•› Dhuhr (Ø¸ÛØ±):</span> <span class="time-value">${t.Dhuhr}</span></div>
        <div><span class="time-label">ğŸœ Asr (Ø¹ØµØ±):</span> <span class="time-value">${t.Asr}</span></div>
        <div><span class="time-label">ğŸŒ‡ Sunset (ØºØ±ÙˆØ¨):</span> <span class="time-value">${t.Sunset}</span></div>
        <div><span class="time-label">ğŸ•Œ Maghrib (Ù…ØºØ±Ø¨):</span> <span class="time-value">${t.Maghrib}</span></div>
        <div><span class="time-label">ğŸŒƒ Isha (Ø¹Ø´Ø§Ø¡):</span> <span class="time-value">${t.Isha}</span></div>
        <div><span class="time-label">ğŸ•‹ Tahajjud (ØªÛØ¬Ø¯):</span> <span class="time-value">${formatTime(addMinutes(t.Fajr, -90))}</span></div>
      `;
      document.getElementById("autoTimings").innerHTML = html;
    } catch (err) {
      document.getElementById("autoTimings").innerText = "âŒ Location ya Internet ka issue hai. Manual timing use karen.";
    }
  }

  function addMinutes(timeStr, mins) {
    const [h, m] = timeStr.split(":").map(Number);
    const date = new Date();
    date.setHours(h, m + mins);
    return date;
  }

  function formatTime(date) {
    const h = date.getHours().toString().padStart(2, "0");
    const m = date.getMinutes().toString().padStart(2, "0");
    return `${h}:${m}`;
  }

  function showManual() {
    const f = document.getElementById("manualFajr").value;
    const d = document.getElementById("manualDhuhr").value;
    const a = document.getElementById("manualAsr").value;
    const m = document.getElementById("manualMaghrib").value;
    const i = document.getElementById("manualIsha").value;

    if (!f || !d || !a || !m || !i) {
      alert("â›” Har waqt bharna (ÛØ± ÙˆÙ‚Øª Ø¨Ú¾Ø±Ù†Ø§) zaroori hai");
      return;
    }

    const timings = { fajr: f, dhuhr: d, asr: a, maghrib: m, isha: i };
    localStorage.setItem("manualTimings", JSON.stringify(timings));

    renderManualTimings(timings);
  }

  function renderManualTimings(timings) {
    const html = `
      <div><span class="time-label">ğŸ•Œ Fajr (ÙØ¬Ø±):</span> <span class="time-value">${timings.fajr}</span></div>
      <div><span class="time-label">ğŸ•› Dhuhr (Ø¸ÛØ±):</span> <span class="time-value">${timings.dhuhr}</span></div>
      <div><span class="time-label">ğŸœ Asr (Ø¹ØµØ±):</span> <span class="time-value">${timings.asr}</span></div>
      <div><span class="time-label">ğŸ•Œ Maghrib (Ù…ØºØ±Ø¨):</span> <span class="time-value">${timings.maghrib}</span></div>
      <div><span class="time-label">ğŸŒƒ Isha (Ø¹Ø´Ø§Ø¡):</span> <span class="time-value">${timings.isha}</span></div>
    `;
    document.getElementById("manualResult").innerHTML = html;
  }

  function loadManualTimings() {
    const saved = localStorage.getItem("manualTimings");
    if (saved) {
      const timings = JSON.parse(saved);
      document.getElementById("manualFajr").value = timings.fajr;
      document.getElementById("manualDhuhr").value = timings.dhuhr;
      document.getElementById("manualAsr").value = timings.asr;
      document.getElementById("manualMaghrib").value = timings.maghrib;
      document.getElementById("manualIsha").value = timings.isha;
      renderManualTimings(timings);
    }
  }

  window.onload = () => {
    getAutoTimings();
    loadManualTimings();
  };
</script>

</body>
</html>
